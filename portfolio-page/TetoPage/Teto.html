<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="icon" href="../../img/favicon.webp">
  <link rel="stylesheet" href="../uncoverPage/reset.css">
  <link rel="stylesheet" href="./Teto.css">
  <link rel="stylesheet" href="../../fontawesome/css/all.min.css">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/monokai-sublime.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>

  <title>Demuu Portfolio</title>
</head>
<body>

  <header>
    <div id="header">
      <div class="header-container clearfix">
        <div class="header-logo">
          <a href="../../main-page/index.html"><img src="../../img/faviconB.webp" alt="logo"/></a>
        </div>
        <div class="header-menu">
          <ul>
            <li>
              <a href="../../main-page/index.html">Home</a>
            </li>
            <li>
              <a href="../../portfolio-page/portfolio.html">Portfolio</a>
            </li>
            <li>
              <a href="../../gallery-page/gallery.html">Gallery</a>
            </li>
            <li>
              <a href="https://preasim.github.io">Blog</a>
            </li>
          </ul>
        </div>
    
        <!-- ----- header-menu2 (576px or less) ----- -->
        <div class="header-menu2">
          <div class="circle"></div>
          <div class="menu2-menus">
            <ul>
              <li><a href="../../main-page/index.html">Home</a></li>
              <li><a href="../../portfolio-page/portfolio.html">Portfolio</a></li>
              <li><a href="../../gallery-page/gallery.html">Gallery</a></li>
              <li><a href="https://preasim.github.io">Blog</a></li>
            </ul>
          </div>
          <div class="burger">
            <div class="x"></div>
            <div class="y"></div>
            <div class="z"></div>
          </div> 
        </div>
      </div>
    </div>
  </header>
  
  <div class="site">
    <a href="https://github.com/Preasim/Team.Apocalypse/tree/main" target="_blank">
      <div class="item">
        <img src="../../img/github2.png" style="width: 90%; padding-top: 4px;">
      </div>
    </a>
  </div>


  <div class="break-container">
    <div class="portfolio">
      <h2 class="date">2023.11.11 ~ Present</h2>
      <h2 class="projectName">TETO</h2>
      <h2 class="teamName">Team. Apocalypse</h2>

      <div id="summary">
        <h2 class="title">Summary</h2>
        <div class="summary-site">
          <a href="https://github.com/Preasim/Team.Apocalypse/tree/main" target="_blank">
            <div class="item">
              <img src="../../img/github2.png" style="width: 86%; padding-top: 2px;">
            </div>
          </a>
        </div>
        <p>일정, 루틴 관리 플랫폼 / 하루의 루틴, 일정, 그리고 할 일을 효과적으로 관리할 수 있는 웹 앱입니다.</p>
        <p>평소에는 칸반보드와 캘린더를 각각 다른 플랫폼에서 사용하다가 혼잡한 느낌이 들었고,</p>
        <p>특히 하루의 루틴을 효율적으로 관리할 수 있는 플랫폼이 필요하다는 생각에 이를 통합한 아이디어를 기획했습니다.</p>
        <div class="cl3"></div>
        <p>이전 프로젝트에서 얻은 경험을 활용하여 현재 프로젝트에서는 개별적으로 Back-end 개발을 수행하고 있습니다.</p>
        <p>Spring Security를 활용한 로그인, 테스트 코드, Spring Rest Docs 등과 같은 다양한 기술들을 혼자서 개발하면서</p>
        <p>하나의 애플리케이션을 구축하는 과정에서 필요한 모든 개발 능력을 경험하고 학습하고 있습니다.</p>
        <div class="cl3"></div>
        <div class="sum-img">
          <div class="img1">
            <div class="item">
              <img src="../../img/teto1.png">
            </div>
            <div class="item">
              <img src="../../img/teto2.png">
            </div>
          </div>
          <div class="img2">
            <div class="item">
              <img src="../../img/teto3.png">
            </div>
            <div class="item">
              <img src="../../img/teto4.png">
            </div>
          </div>
        </div>
      </div>

      <div id="architecture">
        <h2 class="title">Architecture</h2>
        <p><a href="../../img/TETOERD.png" target="_blank">ERD 바로가기 <i class="fa-solid fa-chevron-right"></i></a></p>

        <div class="stack">
          <img src="../../img/Architecture1.webp">
        </div>
      </div>

      <div id="experience">
        <h2 class="title">Experience</h2>
        <p>이 프로젝트에서 저는 팀 리더로서 기획부터 아키텍처 설계, 가이드 문서 작성, 디자인 아이디어 제시를 주도했습니다.</p>
        <p>기술적인 측면에서는 주로 플레이리스트와 관련된 부분에 집중했습니다.</p>
        <p>구체적으로는 플레이리스트, 플레이리스트 댓글, 좋아요 기능, 그리고 태그 및 플레이리스트 태그를 구현하는 등의 작업을 수행했습니다.</p>
        <div class="cl3"></div>
        <p>플레이리스트는 멤버, 음악, 태그, 댓글, 좋아요 등 모든 부분과 연결되어 있어 예상보다 복잡한 작업이었습니다.</p>
        <p>미숙함으로 인해 다른 테이블과의 연관관계 매핑이 어려웠고, 이에 따른 작업이 상당한 시간을 필요로 했습니다.</p>

        <div id="toggle-code" class="toggle-code-1">
          <div class="toggle-code-btn tcb1">
            <p>소스코드 보기</p>
            <i id="toggle-right" class="fa-solid fa-angle-right tr1"></i>
            <i id="toggle-down" class="fa-solid fa-angle-down td1"></i>
          </div>
          <pre>
            <code class="language-java">
              @ElementCollection(fetch = FetchType.LAZY)
              private List&lt;String> tags = new ArrayList<>();
    
              @OneToMany(mappedBy = "playList", cascade = {CascadeType.ALL})
              private List&lt;PlayListTag> playListTags = new ArrayList<>();
    
              @OneToMany(mappedBy = "playList", cascade = {CascadeType.ALL})
              private List&lt;PlayListLike> playListLikes = new ArrayList<>();
    
              @OneToMany(mappedBy = "playList", cascade = {CascadeType.ALL})
              private List&lt;PlayListComment> playListComments = new ArrayList<>();
    
              @Column(nullable = false)
              private int likeCount = this.playListLikes.size();
    
              @OneToMany(mappedBy = "playList", cascade = {CascadeType.ALL})
              private List&lt;PlayListMusic> playlistMusics = new ArrayList<>();
            </code>
          </pre>
        </div>
        
        <p>이 경험을 통해 데이터베이스 디자인과 연관된 실무 능력을 향상시키는 계기가 되었습니다.</p>
        <div class="cl2"></div>
        <p>또한 프로젝트가 진행되면서, 사용자의 역할(role)에 따른 권한 설정에 대한 이슈도 함께 다뤘습니다.</p>
        <p>이는 관리자 계정과 사용자 계정으로 권한을 나누고, 그에 따라 다른 기능을 제공하도록 하였습니다.</p>
        <p>이 부분은 프로젝트 시작 전부터 공부하고 싶었던 주제였으며,</p>
        <p>실제로 구현해보니 이론에서 얻지 못했던 깊은 이해와 새로운 인사이트를 얻을 수 있었습니다.</p>

        <div id="toggle-code" class="toggle-code-2">
          <div class="toggle-code-btn tcb2">
            <p>소스코드 보기</p>
            <i id="toggle-right" class="fa-solid fa-angle-right tr2"></i>
            <i id="toggle-down" class="fa-solid fa-angle-down td2"></i>
          </div>
          <pre>
            <code class="language-java">
              public Member createMember(Member member) {
                  verifyExistEmail(member.getEmail());
                  member.setName(verifyExistName(member.getName()));
          
                  // (3) 추가: Password 암호화
                  String encryptedPassword = passwordEncoder.encode(member.getPassword());
                  member.setPassword(encryptedPassword);
          
                  // (4) 추가: DB에 User Role 저장
                  List&lt;String> roles = authorityUtils.createRoles(member.getEmail());
                  member.setRoles(roles);
          
                  Member savedMember = memberRepository.save(member);
          
                  return savedMember;
              }

              public Member createMemberOAuth2(Member member) {
                  List&lt;String> roles = authorityUtils.createRoles(member.getEmail());
                  member.setRoles(roles);
                  String newName = verifyExistName(member.getName());
                  member.setName(newName);
          
                  return memberRepository.save(member);
              }

              public void deletePlayList(long playListId, long memberId){
                  PlayList playList = findVerifiedPlayList(playListId);
                  Member member = memberService.findMember(memberId);
          
                  if (!member.getRoles().contains("ADMIN")) {
                      if (!member.getMemberId().equals(playList.getMember().getMemberId())){
                          throw new BusinessLogicException(ExceptionCode.NO_PERMISSION_DELETING_POST);
                      }
                  }
                  member.removePlayList(playList);
                  playListRepository.delete(playList);
              }

              public PlayListComment updateComment(long memberId, long commentId, String content){
                  PlayListComment comment = getComment(commentId);
                  Member member = memberService.findMember(memberId);
          
                  if (!member.getRoles().contains("ADMIN")) {
                      if (!member.getMemberId().equals(comment.getMember().getMemberId())){
                          throw new BusinessLogicException(ExceptionCode.NO_PERMISSION_DELETING_POST);
                      }
                  }
          
                  comment.setContent(content);
                  return commentRepository.save(comment);
              }

              public void deleteComment(long memberId, long commentId){
                  PlayListComment comment = getComment(commentId);
                  Member member = memberService.findMember(memberId);
          
                  if (!member.getRoles().contains("ADMIN")) {
                      if (!member.getMemberId().equals(comment.getMember().getMemberId())){
                          throw new BusinessLogicException(ExceptionCode.NO_PERMISSION_DELETING_POST);
                      }
                  }
                  commentRepository.delete(comment);
              }
            </code>
          </pre>
        </div>

        <div class="cl2"></div>
        <p>마지막으로 프로젝트 중에 발생한 동시성 문제에 대한 해결책 모색과 코드 리팩토링을 통해 성능 개선을 이루어냈습니다.</p>
        <p>동시에 여러 사용자가 좋아요 기능을 사용할 때, 좋아요 수는 1만 증가하는 이 동시성 문제는 이번 프로젝트 중 가장 깊게 고민한 문제입니다.</p>

        <div id="toggle-code" class="toggle-code-3">
          <div class="toggle-code-btn tcb3">
            <p>소스코드 보기</p>
            <i id="toggle-right" class="fa-solid fa-angle-right tr3"></i>
            <i id="toggle-down" class="fa-solid fa-angle-down td3"></i>
          </div>
          <pre>
            <code class="language-java">
              @OneToMany(mappedBy = "playList", cascade = {CascadeType.ALL})
              private List&lt;PlayListLike> playListLikes = new ArrayList<>();
  
              @Column(nullable = false)
              private int likeCount = this.playListLikes.size();
  
              public void addPlayListLike(PlayListLike playListLike) {
                  this.playListLikes.add(playListLike);
                  playListLike.setPlayList(this);
                  this.likeCount = this.playListLikes.size();
              }
  
              public void removePlayListLike(PlayListLike playListLike) {
                  this.playListLikes.remove(playListLike);
                  if(playListLike.getPlayList() != this) {
                      playListLike.setPlayList(this);
                  }
                  this.likeCount = this.playListLikes.size();
              }
  
              // --------------- playListLike Service -----------------
              public PlayListLike addLike(Long memberId, Long playListId){
                  Member member = memberService.findMember(memberId);
                  PlayList playList = playListService.findVerifiedPlayList(playListId);
          
                  PlayListLike like = new PlayListLike();
                  like.setMember(member);
                  like.setPlayList(playList);
          
                  playList.addPlayListLike(like);
                  member.addLikedPlayLists(like);
          
                  return playListLikeRepository.save(like);
              }
          
              public void cancelLike(Long memberId, Long playListId){
                  Member member = memberService.findMember(memberId);
                  PlayList playList = playListService.findVerifiedPlayList(playListId);
                  List&lt;PlayListLike> likes = getAllLikesForMemberAndPlayList(memberId, playListId);
          
                  for (PlayListLike like : likes) {
                      if (member.getMemberId().equals(like.getMember().getMemberId())) {
                          playListLikeRepository.delete(like);
                          playList.removePlayListLike(like);
                          member.removeLikedPlayLists(like);
                      } else throw new BusinessLogicException(ExceptionCode.NO_PERMISSION_EDITING_COMMENT);
                  }
              }
            </code>
          </pre>
        </div>

        <p><a href="https://preasim.github.io/44" style="text-decoration: underline;" target="_blank">동시성 문제 해결법 (블로그) ></a></p>
        <div class="cl3"></div>
        <p>고민 끝에 unique 값인 memberId를 사용해 List에 넣고 그 사이즈를 좋아요 개수로 반환하도록 해결했습니다.</p>
        <p>이러한 경험을 통해 코드 품질 향상과 효율적인 프로젝트 진행을 위한 노하우를 얻게 되었습니다.</p>
        <div class="cl3"></div>
        <p>이러한 어려움에 직면하면서도 팀원들과의 원활한 협업을 통해 공동의 목표를 달성하기 위해 노력했습니다.</p>
        <p>특히, 플레이리스트 관련 기능에 대한 사용자 피드백을 수렴하고, 이를 바탕으로 지속적인 업데이트 및 개선 작업을 진행하였습니다.</p>
        <p>사용자들의 다양한 기대에 부응하면서 기능을 확장하고 최적화함으로써 사용자 경험을 꾸준히 향상 시켰습니다.</p>
        <div class="cl3"></div>
        <p>앞으로는 이러한 경험을 기반으로 더욱 복잡하고 대규모의 프로젝트에서도 효과적으로</p>
        <p>리더십을 발휘하고, 기술적인 도전에 더욱 안정적으로 대처해 나가고자 합니다.</p>

        
      </div>

      <div id="retrospective">
        <h2 class="title">Retrospective</h2>
        <p>프로젝트 동안 팀원들과의 원활한 커뮤니케이션은 프로젝트의 핵심이었습니다.</p>
        <p>API 명세, ERD 등 아키텍처나 트러블 슈팅에 관해 의견을 공유하고 조율하는 과정에서</p>
        <p>서로의 아이디어와 전문성을 존중하고 융합할 수 있는 능력을 키울 수 있었습니다.</p>
        <p>특히 정기적인 회의와 업무 분담, 의사 결정 과정에서의 원활한 소통은</p>
        <p>프로젝트 일정을 효율적으로 관리하고 업무의 효율성을 높이는 데 기여했습니다.</p>
        <div class="cl3"></div>
        <p>프로젝트 마무리 단계에서 다른 팀의 서비스를 사용하면서 우리 팀과의 기술적인 차이를 경험했습니다.</p>
        <p>이미지 업로드 기술, 멤버 페이지 디자인, OAuth 2 로그인 기능 등을 참고하여</p>
        <p>기술적인 개선점을 도출하여 우리 팀의 프로젝트에 적용할 수 있는 아이디어를 얻을 수 있었습니다.</p>
        <p>이를 향후 프로젝트에 지속적인 서비스로 적용하고 개선해 나가 보다 나은 결과물을 만들어 나갈 수 있도록 하고 싶습니다.</p>
      </div>
    </div>
  </div>


  <script src="../../common/header.js"></script>
  <script src="../uncoverPage/toggleCode.js"></script>
  <script>hljs.highlightAll();</script>
</body>
</html>